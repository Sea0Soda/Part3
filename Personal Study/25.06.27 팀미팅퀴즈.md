# 문제

다음 React 컴포넌트 코드를 보고 질문에 답하세요:

```jsx
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)

  const handleClick = () => {
    setCount(count + 1)
    setCount(count + 1)
    setCount(count + 1)
  }

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={handleClick}>+3 증가</button>
    </div>
  )
}
```

## 질문

**버튼을 한 번 클릭했을 때 count 값은 얼마가 될까요?**

1. `3` - setCount가 3번 호출되어 3만큼 증가한다.
2. `1` - React가 state 업데이트를 배치 처리하여 마지막 호출만 반영된다.
3. `0` - useState의 초기값이 계속 유지된다.
4. `6` - 각 setCount가 이전 값에 누적되어 0→1→2→3이 된다.
5. 컴파일 오류가 발생한다. 같은 state를 연속으로 설정할 수 없다.

---

<details>
<summary><b>정답</b></summary>

### 정답: 2번

**이유:**

- React는 **state 업데이트를 배치 처리**합니다
- 함수가 실행되는 동안 `count` 값은 **0으로 고정**되어 있습니다
- 따라서 모든 `setCount(count + 1)`은 `setCount(0 + 1)`과 같습니다
- React가 마지막 업데이트만 반영하여 결과는 **1**이 됩니다

### 1씩 추가시키는 방법은?

**: 함수형 업데이트 (이전 값 기준)**

```jsx
const handleClick = () => {
  setCount((prev) => prev + 1) // 0 + 1 = 1
  setCount((prev) => prev + 1) // 1 + 1 = 2
  setCount((prev) => prev + 1) // 2 + 1 = 3
}
```

### 핵심 개념

- **State 배치 처리**: React는 성능을 위해 여러 state 업데이트를 모아서 한 번에 처리
- **함수형 업데이트**: `setState(prev => prev + 1)` 형태로 이전 값을 기준으로 업데이트
- **Closure**: 함수 실행 시점의 state 값이 고정됨

</details>

---
